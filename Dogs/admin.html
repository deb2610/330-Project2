<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>DogFinder Admin</title>
</head>

<body>
    <div id="wishList">
        <h2>Wishlists</h2>
        <ol>
            <li>{{ lists }}</li>
        </ol>
    </div>   


    <!-- #1 - link to Firebase goes here  -->
    <script src="https://www.gstatic.com/firebasejs/5.9.2/firebase.js"></script>

    <script>
        const app = new Vue({
            el: '#wishList',
            data: {
                lists: "No data yet!"
            }
        });

        /* #2 - The rest of the Firebase setup code goes here */
        var config = {
            apiKey: "AIzaSyCRUf5MOu0uv5o02s09du0s1Gb9ZodTvoQ",
            authDomain: "fetchwebapp.firebaseapp.com",
            databaseURL: "https://fetchwebapp.firebaseio.com",
            projectId: "fetchwebapp",
            storageBucket: "",
            messagingSenderId: "494221432138"
        };
        firebase.initializeApp(config);
        console.log(firebase); // #3 - make sure firebase is loaded

        // #4 This is where the magic happens!
        firebase.database().ref("wishlist").on("value", dataChanged, firebaseError);
        function dataChanged(data) {
            let obj = data.val();
            console.log(obj);
            let bigString = "";
            for (let key in obj) {   // use for..in to interate through object keys

                let row = obj[key];
                bigString += `<li>${row.userID} :  ${row.score}</li>`;
                console.log(row);
            }
            lists = bigString;
        }

        function firebaseError(error) {
            console.log(error);
        }
    </script>
</body>

</html>